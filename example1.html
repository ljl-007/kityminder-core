<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>KityMinder Example</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <link href="favicon.ico" type="image/x-icon" rel="shortcut icon" />
    <!-- <link rel="stylesheet" href="src/kityminder.css" rel="stylesheet" /> -->

    <style type="text/css">
      html,
      body {
        margin: 0;
        padding: 0;
        height: 100%;
      }

      .mind {
        height: 100%;
        width: 100%;
        /* position: absolute;
            border: 1px solid #ccc;
            left: 10px;
            top: 10px;
            bottom: 10px;
            right: 10px; */
      }
    </style>

    <script
      type="text/javascript"
      src="node_modules/kity/dist/kity.min.js"
    ></script>
  </head>
  <body>
    <div class="mind" id="mind-content"></div>
  </body>

  <script type="text/javascript" src="dist/kityminder.core.js"></script>
  <script type="text/javascript">
    // 创建 km 实例
    /* global kityminder */
    // var km = window.km = new kityminder.Minder();
    const data = {
      data: {
        text: '百度产品',
        // imageSize: { width: 270, height: 129 }
      },
      children: [
        { data: { text: '新闻',type:1 } },
        { data: { text: '网页', type: 1 } },
        { data: { text: '贴吧', type: 2 } },
        { data: { text: '知道', type: 2 } },
        { data: { text: '音乐', type: 3 } },
        { data: { text: '图片', type: 3 } },
        { data: { text: '视频', type: 3 } },
        { data: { text: '地图', type: 3 } },
        { data: { text: '百科', type: 3 } },
        { data: { text: '更多', hyperlink: 'http://www.baidu.com/more' ,type: 1} }
      ]
    }
    var km = new kityminder.Minder()
    km.renderTo('.mind')
    km.importJson({
      root: data,
      template: 'catalogue',
      theme: 'catalogue'
    })
    const addBtn = document.querySelector('.add-btn')
    km.on('beforeExecCommand ', e => {
      const node = km.getSelectedNode()
      if (e.commandName === 'removenode') {
        console.log('beforeExecCommand', e)
        // 实现删除逻辑
        // e.shouldStopPropagation = function () {
        //   return node.getLevel() < 3
        // }
      }
    })
  </script>
</html>
